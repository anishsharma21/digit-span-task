<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digit Span Task</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh; /* Changed from height to min-height */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Changed from center to flex-start */
            background-color: #f5f5f5;
            padding: 20px 0; /* Add some padding top and bottom */
            overflow-y: auto; /* Allow scrolling if needed */
        }

        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            text-align: center;
            margin: 40px 0; /* Add margin to ensure it doesn't touch the edges */
        }
    
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .message {
            font-size: 20px;
            margin: 40px 0;
            padding: 20px;
            background-color: #e9f7ef;
            border-radius: 6px;
            line-height: 1.6;
        }
        
        .instruction-text {
            font-size: 18px;
            text-align: left;
            line-height: 1.8;
            margin-bottom: 30px;
        }
        
        .instruction-image {
            margin: 0 0;
            max-width: 100%;
        }
        
        .final-instruction {
            font-size: 20px;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 50px;
        }
    
        .button-group {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 40px;
        }
    
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.2s;
            flex: 1;
            max-width: 200px;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        #prevButton {
            background-color: #f1c40f;
            color: #333;
        }
        
        #prevButton:hover:not(:disabled) {
            background-color: #e2b607;
        }
        
        #nextButton {
            background-color: #4CAF50;
            color: white;
        }
        
        #nextButton:hover {
            background-color: #45a049;
        }
        
        /* Styles for hiding/showing steps */
        .step {
            display: none;
        }
        
        .step.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- This is the basic structure that will be reused for all steps -->
        <div id="taskContent">
            <!-- Step 1: Welcome screen -->
            <div id="step1" class="step active">
                <h1>Welcome!</h1>
                <div class="message">
                    Click on <strong>Next</strong> to continue
                </div>
            </div>
            
            <!-- Step 2: Instructions -->
            <div id="step2" class="step">
                <h1>Instructions</h1>
                <div class="instruction-text">
                    <p>In this task, digits will be presented on the screen, once at a time.</p>
                    <p>Each digit will be presented for one second. After that, a new number will be presented, and so on.</p>
                    <p>Your task is to try to memorize all the digits.</p>
                    <p>After a few digits, we will ask you to type in the digits in their order of appearance. You can submit your results by pressing the Continue button or by hitting Enter. After you typed the numbers you can forget them.</p>
                    <p>Pay close attention to all of the numbers, because the number of digits within a run will be longer with time.</p>
                </div>
                
                <img src="static/instruction_en.gif" alt="Task Demonstration" class="instruction-image">
                
                <div class="final-instruction">
                    If the instructions are clear, click on Next!
                </div>
            </div>
        </div>
        
        <!-- Navigation buttons -->
        <div class="button-group">
            <button type="button" id="prevButton" disabled>Previous</button>
            <button type="button" id="nextButton">Next</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the task ID from localStorage
            const taskId = localStorage.getItem('digitSpanTaskId');
            
            // Initialize step tracking
            let currentStep = 1;
            const totalSteps = 2; // Increase this as you add more steps
            
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            
            // Function to update button states
            function updateButtonStates() {
                prevButton.disabled = (currentStep === 1);
                nextButton.disabled = (currentStep === totalSteps);
                
                // You can change the next button text on the last step if needed
                // if (currentStep === totalSteps) {
                //     nextButton.textContent = "Finish";
                // } else {
                //     nextButton.textContent = "Next";
                // }
            }
            
            // Function to show the current step
            function showCurrentStep() {
                // Hide all steps
                document.querySelectorAll('.step').forEach(step => {
                    step.classList.remove('active');
                });
                
                // Show the current step
                const currentStepElement = document.getElementById(`step${currentStep}`);
                if (currentStepElement) {
                    currentStepElement.classList.add('active');
                } else {
                    console.error(`Step ${currentStep} element not found`);
                }
                
                updateButtonStates();
            }
            
            // Set up event listeners for navigation buttons
            prevButton.addEventListener('click', function() {
                if (currentStep > 1) {
                    currentStep--;
                    showCurrentStep();
                }
            });
            
            nextButton.addEventListener('click', function() {
                if (currentStep < totalSteps) {
                    currentStep++;
                    showCurrentStep();
                } else {
                    // Handle completion of the task or move to the next phase
                    console.log("Task completed or moving to next phase");
                    // You can add navigation to another page here if needed
                    // window.location.href = "results.html";
                }
            });
            
            // Initialize with the first step
            showCurrentStep();
        });
    </script>
</body>
</html>